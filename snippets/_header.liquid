{% assign default_logo = 'images/logo.png' | asset_url %}
{% assign header_menus = site.settings.header_menu | newline_to_br | split: '<br />' %}


<!-- ========== { HEADER }==========  -->
<header>
    <!-- Navbar -->
    <nav x-data="{ open: false }" class="nav-top flex flex-nowrap lg:flex-start items-center z-20 fixed top-0 start-0 end-0 bg-white dark:bg-gray-800 overflow-y-auto max-h-screen lg:overflow-visible lg:max-h-full">
        <div class="container mx-auto px-4 xl:max-w-6xl ">
        <!-- mobile navigation -->
        <div class="flex flex-row justify-between py-3 lg:hidden">
            <!-- logo -->
            <a class="flex items-center py-2 me-4 text-xl" href="/">
            <span class="text-2xl font-semibold dark:text-gray-100"><span class="text-primary-700">{{ site.name }}</span></span>
            <!-- <img class="max-w-full h-auto" src="{{ 'images/img/logo.png' | asset_url }}" alt="Logo dark"> -->
            </a>

            <!-- navbar toggler -->
            <div class="end-0 flex items-center">
            <!-- Mobile menu button-->
            <button id="navbartoggle" type="button" class="inline-flex items-center justify-center text-gray-800 hover:text-gray-700 dark:text-gray-200 dark:hover:text-gray-300 focus:outline-none focus:ring-0" aria-controls="mobile-menu" @click="open = !open" aria-expanded="false" x-bind:aria-expanded="open.toString()">
                <span class="sr-only">Mobile menu</span>
                <svg x-description="Icon closed" x-state:on="Menu open" x-state:off="Menu closed" class="block h-8 w-8" :class="{ 'hidden': open, 'block': !(open) }" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>

                <svg x-description="Icon open" x-state:on="Menu open" x-state:off="Menu closed" class="hidden h-8 w-8" :class="{ 'block': open, 'hidden': !(open) }" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            </div>
        </div>

        <!-- Mobile menu -->
        <div class="lg:hidden fixed w-full h-full inset-0 z-40" id="mobile-menu" x-description="Mobile menu" x-show="open" style="display: none;">
            <!-- bg open -->
            <span class="fixed bg-gray-900 bg-opacity-70 w-full h-full inset-x-0 top-0"></span>
            
            <!-- Mobile navbar -->
            <nav id="mobile-nav" class="flex flex-col end-0 w-64 fixed top-0 py-4 bg-white dark:bg-gray-800 h-full overflow-auto z-40" x-show="open" @click.away="open=false" x-description="Mobile menu" role="menu" aria-orientation="vertical" aria-labelledby="navbartoggle" 
            x-transition:enter="transform transition-transform duration-300" 
            x-transition:enter-start="ltr:translate-x-full rtl:-translate-x-full" 
            x-transition:enter-end="translate-x-0" 
            x-transition:leave="transform transition-transform duration-300" 
            x-transition:leave-start="translate-x-0" 
            x-transition:leave-end="ltr:translate-x-full rtl:-translate-x-full">
            <div class="mb-auto">
                <!--logo-->
                <div class="mh-18 text-center px-12 mb-8">
                <a href="/" class="flex relative">
                    <span class="text-xl font-semibold px-4 dark:text-gray-200"><span class="text-primary-700">{{ site.name }}</span></span>
                    <!-- <img src="{{ 'images/img/logo.png' | asset_url }}" class="max-w-full h-auto" alt="logo"> -->
                    <span class="absolute -bottom-4 transform ltr:translate-x-1/2 rtl:-translate-x-1/2 w-20 h-0 border-t-2 border-opacity-50 border-primary-700 mx-auto"></span>
                </a>
                </div>

                <!--navigation-->
                <div class="mb-4">
                <nav class="relative flex flex-wrap items-center justify-between">
                    <ul id="side-menu" class="w-full float-none flex flex-col">
                    {% for menu_line in header_menus %}
                        {%  assign p_menu_arr = menu_line | split: '{' %}
                        {%  assign parent_menu = p_menu_arr[0] | split: '[' %}
                        {%  assign sub_menus = p_menu_arr[1] | split: '|' %}
                        {%  assign sub_menus_count =  sub_menus | size %}

                        {% if sub_menus_count > 0 %}
                            <li class="relative flex items-center space-x-1" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
                                <a class="" href="{{ parent_menu[1] | default: '#' }}" :aria-expanded="open">{{ parent_menu[0] }}</a>
                                <button class="shrink-0 p-1" :aria-expanded="open" @click.prevent="open = !open">
                                    <span class="sr-only">Show submenu for "Flyout Menu"</span>
                                    <svg class="w-3 h-3 fill-white" xmlns="http://www.w3.org/2000/svg" width="12" height="12">
                                        <path d="M10 2.586 11.414 4 6 9.414.586 4 2 2.586l4 4z" />
                                    </svg>
                                </button>
                                <!-- 2nd level menu -->
                                <ul
                                    class="origin-top-right absolute top-full left-1/2 -translate-x-1/2 min-w-[240px] bg-white border border-slate-200 p-2 rounded-lg shadow-xl [&[x-cloak]]:hidden"
                                    x-show="open"
                                    x-transition:enter="transition ease-out duration-200 transform"
                                    x-transition:enter-start="opacity-0 -translate-y-2"
                                    x-transition:enter-end="opacity-100 translate-y-0"
                                    x-transition:leave="transition ease-out duration-200"
                                    x-transition:leave-start="opacity-100"
                                    x-transition:leave-end="opacity-0"
                                    x-cloak
                                    @focusout="await $nextTick();!$el.contains($focus.focused()) && (open = false)"
                                >
                                {% for second_menu in sub_menus %}
                                    {%  assign second_menu_arr = second_menu | split: '[' %}
                                    <li>
                                        <a class="text-slate-800 hover:bg-slate-50 flex items-center p-2" href="{{ second_menu_arr[1] | default: '#'}}">
                                            <div class="flex items-center justify-center h-7 w-7 shrink-0 mr-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-primary w-4 h-4">
                                                <path fill-rule="evenodd" d="M4.5 7.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9Z" clip-rule="evenodd" />
                                            </svg>
                                            </div>
                                            <span class="whitespace-nowrap">{{ second_menu_arr[0] }}</span>
                                        </a>
                                    </li>
                                {% endfor %}
                                </ul>
                            </li>
                        {% else %}
                            <li class="relative">
                                <a class="group block py-3 lg:py-7 px-6 hover:text-primary-700 focus:text-primary-700 dark:hover:text-gray-100 dark:focus:text-gray-100" href="{{ parent_menu[1] | default: '#'}}">
                                <span class="absolute bottom-1 start-1/5 transform ltr:-translate-x-1/2 rtl:translate-x-1/2 w-12 h-0.5 bg-primary-700 transition duration-700 ease-in-out opacity-0 group-hover:opacity-100"></span>
                                {{ parent_menu[0] }}
                                </a>
                            </li>
                            
                        {% endif %}
                    {% endfor %}
                    

                    <li class="relative">
                        <a href="{{ site.settings.request_url}}" target="_blank" class="block py-3 px-4 hover:text-primary-700 focus:text-primary-700 dark:hover:text-gray-100 dark:focus:text-gray-100">{{ site.settings.request_title }}</a>
                    </li>
                    </ul>
                </nav>
                </div>
            </div>
            <!-- copyright -->
            <div class="mt-5 text-center text-xs">
                <p><a href="/">{{ site.name }}.</a> - All right reserved</p>
            </div>
            </nav>
        </div><!-- End Mobile menu -->

        <!-- desktop menu -->
        <div class="hidden lg:flex lg:flex-row lg:flex-nowrap lg:items-center lg:justify-between lg:mt-0" id="desktp-menu">
            <!-- logo -->
            <a class="hidden lg:flex items-center py-2 me-4 text-xl" href="/">
                {% if site.settings.logo_url %}
                <img class="h-12" src="{{ site.settings.logo_url }}" alt="Logo {{ site.name }}">
                {% else %}
                    <span class="text-2xl font-semibold dark:text-gray-100"><span class="text-primary-700">{{ site.name }}</span></span>
                {% endif %}
            </a>

            <!-- menu -->
            <ul class="flex flex-col lg:mx-auto mt-2 lg:flex-row lg:mt-0">
                {% for menu_line in header_menus %}
                    {%  assign p_menu_arr = menu_line | split: '{' %}
                    {%  assign parent_menu = p_menu_arr[0] | split: '[' %}
                    {%  assign sub_menus = p_menu_arr[1] | split: '|' %}
                    {%  assign sub_menus_count =  sub_menus | size %}

                    {% if sub_menus_count > 0 %}
                        <li class="relative flex items-center space-x-1" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
                            <a id="dropdown-02" class="group block text-lg py-3 lg:py-7 px-4 hover:text-primary-700 focus:text-primary-700 dark:hover:text-gray-100 dark:focus:text-gray-100" href="javascript:;" :aria-expanded="open" @click.prevent="open = !open" aria-haspopup="true" x-bind:aria-expanded="open" :aria-expanded="open" :class="{ 'text-primary-700 dark:text-gray-100': open }">
                                <span class="absolute bottom-4 start-1/2 transform ltr:-translate-x-1/2 rtl:translate-x-1/2 w-6 h-0.5 bg-primary-700 transition duration-700 ease-in-out opacity-0 group-hover:opacity-100" :class="{ 'opacity-100': open }"></span>
                                {{ parent_menu[0] }}
                                <!-- caret -->
                                <span class="inline-block ms-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width=".8rem" height=".8rem" fill="currentColor" viewBox="0 0 512 512"><polyline points="112 184 256 328 400 184" style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px"/></svg>
                                </span>
                            </a>
                            <!-- 2nd level menu -->
                            <ul
                                class="origin-top-right absolute top-full left-1/2 -translate-x-1/2 min-w-[240px] bg-white border border-slate-200 p-2 rounded-lg shadow-xl [&[x-cloak]]:hidden"
                                x-show="open"
                                x-transition:enter="transition ease-out duration-200 transform"
                                x-transition:enter-start="opacity-0 -translate-y-2"
                                x-transition:enter-end="opacity-100 translate-y-0"
                                x-transition:leave="transition ease-out duration-200"
                                x-transition:leave-start="opacity-100"
                                x-transition:leave-end="opacity-0"
                                x-cloak
                                @focusout="await $nextTick();!$el.contains($focus.focused()) && (open = false)"
                            >
                            {% for second_menu in sub_menus %}
                                {%  assign second_menu_arr = second_menu | split: '[' %}
                                <li>
                                    <a class="text-slate-800 hover:bg-slate-50 flex items-center p-2" href="{{ second_menu_arr[1] | default: '#'}}">
                                        <div class="flex items-center justify-center h-7 w-7 shrink-0 mr-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-primary w-4 h-4">
                                            <path fill-rule="evenodd" d="M4.5 7.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9Z" clip-rule="evenodd" />
                                        </svg>
                                        </div>
                                        <span class="whitespace-nowrap">{{ second_menu_arr[0] }}</span>
                                    </a>
                                </li>
                            {% endfor %}
                            </ul>
                        </li>
                    {% else %}
                        <li class="relative">
                            <a class="group block text-lg py-3 lg:py-7 px-4 hover:text-primary-700 focus:text-primary-700 dark:hover:text-gray-100 dark:focus:text-gray-100" href="{{ parent_menu[1] | default: '#'}}">
                                <span class="absolute bottom-4 start-1/5 transform ltr:-translate-x-1/2 rtl:translate-x-1/2 w-12 h-0.5 bg-primary-700 transition duration-700 ease-in-out opacity-0 group-hover:opacity-100"></span>
                                {{ parent_menu[0] }}
                            </a>
                        </li>
                        
                    {% endif %}
                {% endfor %}
            </ul>
            
            <!-- button -->
            <div class="grid text-center lg:block my-4 lg:my-auto">
                <a href="{{ site.settings.request_url}}" class="py-2 px-4 text-sm inline-block text-center rounded-md leading-normal text-gray-100 bg-primary-700 border border-primary-700 hover:text-white hover:bg-primary-800 hover:ring-0 hover:border-primary-800 focus:bg-primary-800 focus:border-primary-800 focus:outline-none focus:ring-0" target="_blank" rel="noopener">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 inline me-1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25" />
                    </svg>

                    {{ site.settings.request_title }}
                </a>
            </div>
        </div><!-- end desktop menu -->
        </div>
    </nav><!-- End Navbar -->
</header><!-- end header -->